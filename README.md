# MDM #

**MDM** is a software package designed to calculate the derivative of a qMRI parameter relative to
MTV (MDM signature). The software and the sensetivity of MDM measurments to molecular composition are described in the following article:
"Non-invasive detection of age-related molecular profiles in the human brain"

example= MDM_run(Parameter_path,TV_path,Seg_path,1,saveat_path,{'par_max',0.5,'par_min',0.1,'Parameter_str','R1'})

For more information, please contact: 

>Aviv Mezer: aviv.mezer(AT)elsc.huji.ac.il
>
>Shir Filo: shir.filo(AT)mail.huji.ac.il

## INPUTS ###

1) Parameter_path:   Path to a Nifti of a qMRI map (R1 map, MTsat map, etc.) that will be derived relative to MTV. 

2) TV_path:   Path to a Nifti of a MTV map (with **the same resolusion** as the qMRI map). For more information regarding MTV map see: https://github.com/mezera/mrQ

3) Seg_path:   Path to a Nifti of a brain segmentation or a ROI mask (with **the same resolusion** as the qMRI map). The software will calculate the MTV derivatives for all ROIs (with lables other than zero) in the segmentation file.

4) save_fig:   1/0 depending on whether or the user would like to save the output (1) or not (0).

5) saveat:   path to a directory where the output will be saved.

6) flags:   every parameter that you would like to be different from default can be given here. This input will be expected to come as a cell arrayand in pairs. There are 3 parameters that can bedefined here: (1) 'Parameter_str' is the name of the qMRI parameter (for example 'R1') to be used in the figures. (2) 'Parameter_max' and (3) 'Parameter_min' represent the range of values for the qMRI parameter (to be used in the figures). For example: {'par_max',0.5,'par_min',0.1,'Parameter_str','R1'}.   


## OUTPUTS ###

This function creates and saves the MDM strucure to the 'saveat' directory. In this structure you can find:
*  The different inputs to the function will be saved.
*  The MTV derivatives (MDM measurements) will be saved in the fit matrix. This is an MX2 matrix where M is the number of ROIs in the segmentation and the columns are:
	1) the slope of the linear relationship between the qMRI parameter and MTV (MDM measurement)
	2) the intersection of the linear relationship between the qMRI parameter and MTV.
*  For each ROI, the data point used to fit the linear relationship between the qMRI parameter and MTV, generated by binning over these two parameters, are saved in BinTV and BinPar respectively. The STD of the qMRI parameter in each bin is saved in STD.   


## SOFTWARE REQUIREMENTS ###
  
* MATLAB          - http://www.mathworks.com/products/matlab/
* Vistasoft       - https://github.com/vistalab/vistasoft
* boundedline-pkg - https://github.com/kakearney/boundedline-pkg    

(C) Mezer lab, the Hebrew University of Jerusalem, Israel, Copyright 2019


